import{u as S,r,j as t,L as x}from"./index-D0UK4MyN.js";import{s as o}from"./api-Ch0e_-9b.js";function C(){const m=S(),[i,j]=r.useState([]),[y,d]=r.useState(!0),[g,c]=r.useState(!1),[s,n]=r.useState({title:"",scriptType:"other",rawScript:""}),[p,v]=r.useState(!1),[h,l]=r.useState(null);r.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const e=await o.list();j(e.scripts||[])}catch(e){console.error("Failed to load scripts:",e),l("Failed to load scripts")}finally{d(!1)}},N=async e=>{e.preventDefault();try{v(!0),l(null);const a=await o.create(s);m(`/ttv/scripts/${a.script.id}`)}catch(a){console.error("Failed to create script:",a),l(a.message||"Failed to create script")}finally{v(!1)}},f=async e=>{if(confirm("Are you sure you want to delete this script?"))try{await o.delete(e),u()}catch(a){console.error("Failed to delete script:",a),l("Failed to delete script")}};return y?t.jsx("div",{className:"ttv-page",children:t.jsx("div",{className:"ttv-loading",children:t.jsx("div",{className:"ttv-spinner"})})}):t.jsxs("div",{className:"ttv-page",children:[t.jsxs("div",{className:"ttv-page-header",children:[t.jsx("h1",{className:"ttv-page-title",children:"Scripts"}),t.jsx("p",{className:"ttv-page-subtitle",children:"Manage your teleprompt scripts"})]}),h&&t.jsx("div",{className:"ttv-alert ttv-alert-error",children:h}),g?t.jsxs("div",{className:"ttv-card",children:[t.jsx("h2",{className:"ttv-card-title",children:"Create New Script"}),t.jsxs("form",{onSubmit:N,children:[t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Title"}),t.jsx("input",{type:"text",className:"ttv-input",value:s.title,onChange:e=>n({...s,title:e.target.value}),required:!0,placeholder:"Enter script title"})]}),t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Type"}),t.jsxs("select",{className:"ttv-select",value:s.scriptType,onChange:e=>n({...s,scriptType:e.target.value}),children:[t.jsx("option",{value:"other",children:"Other"}),t.jsx("option",{value:"voiceover",children:"Voiceover"}),t.jsx("option",{value:"sync",children:"Sync"})]})]}),t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Script Text"}),t.jsx("textarea",{className:"ttv-textarea",value:s.rawScript,onChange:e=>n({...s,rawScript:e.target.value}),placeholder:"Enter your script text here...",style:{minHeight:"200px"}})]}),t.jsxs("div",{style:{display:"flex",gap:"12px"},children:[t.jsx("button",{type:"submit",className:"ttv-button",disabled:p||!s.title,children:p?"Creating...":"Create Script"}),t.jsx("button",{type:"button",className:"ttv-button ttv-button-secondary",onClick:()=>c(!1),children:"Cancel"})]})]})]}):t.jsx("div",{style:{marginBottom:"24px"},children:t.jsx("button",{className:"ttv-button",onClick:()=>c(!0),children:"+ New Script"})}),i.length===0?t.jsx("div",{className:"ttv-card",children:t.jsxs("div",{className:"ttv-empty-state",children:[t.jsx("div",{className:"ttv-empty-icon",children:"ðŸ“"}),t.jsx("p",{className:"ttv-empty-title",children:"No scripts yet"}),t.jsx("p",{className:"ttv-empty-description",children:"Create your first teleprompt script to get started"}),t.jsx("button",{className:"ttv-button",onClick:()=>c(!0),children:"Create Your First Script"})]})}):t.jsxs("div",{className:"ttv-card",children:[t.jsxs("h2",{className:"ttv-card-title",children:["All Scripts (",i.length,")"]}),t.jsx("ul",{className:"ttv-list",children:i.map(e=>t.jsx("li",{className:"ttv-list-item",children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[t.jsx("div",{style:{flex:1},children:t.jsxs(x,{to:`/ttv/scripts/${e.id}`,style:{textDecoration:"none",color:"inherit"},children:[t.jsx("h3",{style:{margin:"0 0 8px",color:"#F1F5F9"},children:e.title}),t.jsxs("div",{style:{fontSize:"14px",color:"#94A3B8",marginBottom:"8px"},children:[e.script_type," â€¢ ",e.status," â€¢"," ",new Date(e.created_at).toLocaleDateString()]}),e.raw_script&&t.jsxs("p",{style:{fontSize:"14px",color:"#64748B",margin:0},children:[e.raw_script.substring(0,150),e.raw_script.length>150?"...":""]})]})}),t.jsxs("div",{style:{display:"flex",gap:"8px",marginLeft:"16px"},children:[t.jsx(x,{to:`/ttv/scripts/${e.id}`,className:"ttv-button ttv-button-secondary",children:"Edit"}),t.jsx("button",{className:"ttv-button ttv-button-danger",onClick:()=>f(e.id),children:"Delete"})]})]})},e.id))})]})]})}export{C as default};
