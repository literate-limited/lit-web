import{r as S,j as e}from"./index-D0UK4MyN.js";import{r as ie}from"./index-DpCu-vl3.js";import{b as X,c as ne}from"./index-ov5DlZln.js";const ce=({hotTemp:t,coldTemp:o,volume:r,moles:c,irreversibility:s,heatAdded:i,workOut:x,efficiency:p,entropyBalance:m,pressureHot:u,pressureCold:h})=>{const{pathD:N,cyclePoints:P,labels:k,isoCurves:H,gridLines:C}=S.useMemo(()=>{const a=Math.max(r,.6),T=1.18+Math.max(t-o,40)/1e3*.65,z=.06+s*.4,F=a,V=a*T,A=a*(T*1.06+z),W=a*(.88+z*.6),v=(d,n)=>c*8.314*d/n,D=v(t,F),K=v(t,V),R=v(o,A),J=v(o,W),G=[F,V,A,W],O=[D,K,R,J],$=Math.max(...G)*1.08,b=Math.max(Math.min(...G)*.9,.4),I=Math.max(...O)*1.1,y=Math.max(Math.min(...O)*.82,10),f=(d,n)=>{const g=70+(d-b)/($-b)*820,_=450-(n-y)/(I-y)*(520-70*2);return{x:g,y:_}},q=[f(F,D),f(V,K),f(A,R),f(W,J)],ee=["A","B","C","D"],se=q.map((d,n)=>`${n===0?"M":"L"} ${d.x.toFixed(1)} ${d.y.toFixed(1)}`).join(" ")+" Z",L=(d,n=0)=>{const _=1+n;let Z="";for(let M=0;M<=42;M+=1){const oe=M/42,Q=b+oe*($-b),le=v(d,Q)/_,U=f(Q,le);Z+=`${M===0?"M":"L"} ${U.x.toFixed(1)} ${U.y.toFixed(1)} `}return Z.trim()},te=[{d:L(t,0),color:"rgba(255,179,71,0.45)"},{d:L((t+o)/2,.12),color:"rgba(255,152,120,0.35)"},{d:L(o,.2),color:"rgba(94,234,212,0.35)"}],re=Array.from({length:5},(d,n)=>{const g=b+n/4*($-b);return f(g,y).x}),ae=Array.from({length:5},(d,n)=>{const g=y+n/4*(I-y);return f(b,g).y});return{pathD:se,cyclePoints:q,labels:ee,isoCurves:te,gridLines:{vertical:re,horizontal:ae}}},[t,o,r,c,s,70,960,520]);return e.jsxs("div",{className:"relative h-full w-full overflow-hidden rounded-3xl border border-amber-900/60 bg-gradient-to-br from-[#0e0a07] via-[#17100e] to-[#0d0b15] shadow-[0_25px_70px_rgba(0,0,0,0.35)]",children:[e.jsxs("svg",{viewBox:"0 0 960 520",className:"h-full w-full",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"thermo-fill",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255,200,120,0.18)"}),e.jsx("stop",{offset:"45%",stopColor:"rgba(255,130,90,0.18)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(94,234,212,0.12)"})]}),e.jsxs("linearGradient",{id:"thermo-stroke",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f59e0b"}),e.jsx("stop",{offset:"50%",stopColor:"#f97316"}),e.jsx("stop",{offset:"100%",stopColor:"#22d3ee"})]}),e.jsxs("radialGradient",{id:"thermo-flare",cx:"30%",cy:"20%",r:"70%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255,214,102,0.28)"}),e.jsx("stop",{offset:"60%",stopColor:"rgba(255,138,76,0.08)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(20,10,6,0)"})]})]}),e.jsx("rect",{width:960,height:520,fill:"url(#thermo-flare)"}),e.jsxs("g",{stroke:"rgba(248,180,98,0.12)",strokeWidth:"1.2",children:[C.vertical.map((l,a)=>e.jsx("line",{x1:l,x2:l,y1:70*.7,y2:520-70*.6},`v-${a}`)),C.horizontal.map((l,a)=>e.jsx("line",{x1:70*.8,x2:960-70*.6,y1:l,y2:l},`h-${a}`))]}),H.map((l,a)=>e.jsx("path",{d:l.d,fill:"none",stroke:l.color,strokeWidth:a===0?2.4:1.4,strokeDasharray:a===0?"10 4":"6 5"},`iso-${a}`)),e.jsx("path",{d:N,fill:"url(#thermo-fill)",stroke:"url(#thermo-stroke)",strokeWidth:"3.2",strokeLinejoin:"round",className:"drop-shadow-[0_10px_50px_rgba(249,115,22,0.25)]"}),P.map((l,a)=>e.jsxs("g",{transform:`translate(${l.x}, ${l.y})`,children:[e.jsx("circle",{r:8.5,fill:"#0b0907",stroke:"#f59e0b",strokeWidth:"2"}),e.jsx("circle",{r:4,fill:"#22d3ee"}),e.jsx("text",{x:0,y:-14,textAnchor:"middle",className:"mathmadness-mono",fill:"#f8fafc",fontSize:"11",children:k[a]})]},`pt-${k[a]}`)),e.jsx("text",{x:70*.8,y:70*.7-10,fill:"rgba(248,180,98,0.8)",className:"mathmadness-mono",fontSize:"12",children:"Pressure (kPa)"}),e.jsx("text",{x:890,y:520-70*.25,fill:"rgba(248,180,98,0.8)",textAnchor:"end",className:"mathmadness-mono",fontSize:"12",children:"Volume (L)"})]}),e.jsxs("div",{className:"pointer-events-none absolute left-4 top-4 flex max-w-lg flex-col gap-2 rounded-2xl border border-amber-800/60 bg-[#1b100a]/80 px-4 py-3 text-xs text-amber-100 shadow-lg shadow-amber-900/30 backdrop-blur",children:[e.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] text-amber-200/80",children:"Cycle primer"}),e.jsx("p",{className:"mathmadness-mono text-sm text-amber-50",children:"Hot reservoir drives the isothermal rise (A->B), expansion leaks to the cold sink (B->C), and compression returns the working fluid (C->D->A)."})]}),e.jsxs("div",{className:"pointer-events-none absolute right-4 top-4 flex flex-wrap gap-2 text-[11px] text-amber-100",children:[e.jsxs("span",{className:"flex items-center gap-2 rounded-full bg-[#1f120d]/80 px-3 py-1 shadow-inner shadow-amber-900/40 ring-1 ring-amber-700/50",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),Math.round(t)," K hot"]}),e.jsxs("span",{className:"flex items-center gap-2 rounded-full bg-[#0f1a1c]/80 px-3 py-1 shadow-inner shadow-cyan-900/40 ring-1 ring-cyan-800/50",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-cyan-300"}),Math.round(o)," K cold"]})]}),e.jsxs("div",{className:"pointer-events-none absolute right-4 bottom-4 flex flex-wrap items-center gap-3 rounded-2xl border border-amber-800/50 bg-[#110b09]/85 px-4 py-3 text-[11px] text-amber-50 shadow-lg shadow-amber-900/30 backdrop-blur",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-300"}),"eta ",Math.round(p*100),"%"]}),e.jsxs("div",{className:"flex items-center gap-2 text-cyan-100",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-cyan-300"}),"W ~ ",x.toFixed(1)," kJ"]}),e.jsxs("div",{className:"flex items-center gap-2 text-amber-200/80",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-amber-400"}),"Qh ",i.toFixed(0)," kJ"]}),e.jsxs("div",{className:"flex items-center gap-2 text-emerald-200/80",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-300"}),"Delta S ",m.toFixed(3)," kJ/K"]})]}),e.jsxs("div",{className:"pointer-events-none absolute left-4 bottom-4 flex flex-col gap-1 rounded-xl bg-[#0c1417]/80 px-3 py-2 text-[11px] text-slate-100 ring-1 ring-cyan-700/40 backdrop-blur",children:[e.jsxs("span",{className:"mathmadness-mono text-xs text-cyan-100",children:["Ph: ",Math.round(u)," kPa / Pc: ",Math.round(h)," kPa"]}),e.jsx("span",{className:"text-[10px] uppercase tracking-[0.25em] text-cyan-200/70",children:"p-v trace (area ~ work)"})]})]})},de=[{title:"Zeroth law",expression:"Equilibrium is transitive",description:"If A is in thermal equilibrium with B and B with C, all share the same temperature."},{title:"First law",expression:"Energy is conserved",description:"Heat added becomes internal energy or work; track both to close the balance."},{title:"Second law",expression:"Entropy never decreases",description:"Real cycles waste some availability; irreversibility eats into Carnot efficiency."},{title:"Third law",expression:"Absolute zero is unreachable",description:"Entropy approaches a floor as T heads toward 0 K; cold sinks still have cost."}],w=({label:t,value:o,min:r,max:c,step:s,unit:i,accent:x,description:p,formatValue:m=h=>h,onChange:u})=>e.jsxs("label",{className:"block rounded-xl border border-amber-900/70 bg-[#1c110c]/70 px-4 py-3 shadow-inner shadow-amber-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] uppercase tracking-[0.25em] text-amber-300/80",children:[e.jsx("span",{children:t}),e.jsxs("span",{className:"text-sm font-semibold text-amber-50 tracking-normal",children:[m(o)," ",i]})]}),e.jsx("input",{type:"range",min:r,max:c,step:s,value:o,onChange:h=>u(Number(h.target.value)),className:"mt-3 h-2 w-full cursor-pointer accent-amber-400",style:{accentColor:x},"aria-label":t}),e.jsx("p",{className:"mt-2 text-xs text-amber-200/80",children:p})]}),Y=(t,o,r)=>Math.min(r,Math.max(o,t)),be=()=>{const[t,o]=S.useState({hotTemp:850,coldTemp:320,volume:1.1,moles:1.3,irreversibility:.08}),r=S.useMemo(()=>{const s=Math.max(t.hotTemp,t.coldTemp+30),i=Math.min(t.coldTemp,s-5),x=Math.max(.6,t.volume),p=Math.max(.4,t.moles),m=Y(t.irreversibility,0,.35),u=8.314,h=Math.max(0,1-i/s),E=1-m*.3,B=Y(h*E,.02,.9),j=Math.max(220,(s-i)*.55*p+200),N=j*B,P=p*u*s/x,k=p*u*i/(x*(1+m*.18)),H=j/s-(j-N)/i+m*.02,C=x*(1-m*.1);return{hot:s,cold:i,volume:C,moles:p,irreversibility:m,efficiency:B,heatAdded:j,workOut:N,entropyBalance:H,pressureHot:P,pressureCold:k}},[t]),c=s=>i=>o(x=>({...x,[s]:i}));return e.jsxs("div",{className:"flex h-[calc(100vh-4rem)] min-h-[720px] flex-col gap-4 overflow-hidden rounded-l-3xl xl:flex-row",children:[e.jsxs("div",{className:"w-full max-w-xl shrink-0 space-y-5 border-b border-amber-900/70 bg-[#120b08]/85 px-6 py-6 backdrop-blur-xl xl:h-full xl:border-b-0 xl:border-r",children:[e.jsxs("div",{className:"flex items-center gap-3 text-amber-50",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-2xl bg-gradient-to-br from-amber-500/25 via-orange-400/25 to-emerald-300/25 text-amber-200 shadow-inner shadow-amber-900/20 ring-1 ring-amber-500/30",children:e.jsx(X,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.35em] text-amber-300/90",children:"Lit Heat Lab"}),e.jsx("p",{className:"text-lg font-semibold",children:"Thermodynamics Cycle"})]})]}),e.jsx("p",{className:"text-sm text-amber-100/90",children:"Push a working fluid through a four-step loop, dial reservoir temperatures, and feel how irreversibility drags Carnot's limit. The p-v area glows with the work you harvest."}),e.jsx("div",{className:"grid gap-3",children:de.map(s=>e.jsxs("div",{className:"rounded-2xl border border-amber-900/80 bg-[#1b110c]/70 p-4 shadow-[0_10px_40px_rgba(0,0,0,0.35)]",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-50",children:s.title}),e.jsx("span",{className:"rounded-full bg-amber-900/70 px-3 py-1 text-[11px] text-amber-200 ring-1 ring-amber-700/50",children:s.expression})]}),e.jsx("p",{className:"mt-2 text-xs text-amber-200/80",children:s.description})]},s.title))}),e.jsxs("div",{className:"rounded-2xl border border-amber-900/80 bg-[#1a100c]/70 p-4 shadow-inner shadow-amber-900/20",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold text-amber-50",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"text-amber-300"}),"Cycle readouts"]}),e.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-amber-300/80",children:"Live"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3 text-sm text-amber-100",children:[e.jsxs("div",{className:"rounded-xl bg-[#23130d]/70 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-amber-300/70",children:"Efficiency"}),e.jsxs("p",{className:"text-lg font-semibold",children:[Math.round(r.efficiency*100),"%"]}),e.jsx("p",{className:"text-[11px] text-amber-200/70",children:"Carnot trimmed by losses"})]}),e.jsxs("div",{className:"rounded-xl bg-[#23130d]/70 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-amber-300/70",children:"Work out"}),e.jsxs("p",{className:"text-lg font-semibold",children:[r.workOut.toFixed(1)," kJ"]}),e.jsx("p",{className:"text-[11px] text-amber-200/70",children:"Area under the loop"})]}),e.jsxs("div",{className:"rounded-xl bg-[#23130d]/70 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-amber-300/70",children:"Heat in"}),e.jsxs("p",{className:"text-lg font-semibold",children:[r.heatAdded.toFixed(0)," kJ"]}),e.jsx("p",{className:"text-[11px] text-amber-200/70",children:"Supplied from hot bath"})]}),e.jsxs("div",{className:"rounded-xl bg-[#23130d]/70 px-3 py-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-[0.2em] text-amber-300/70",children:"Entropy"}),e.jsxs("p",{className:"text-lg font-semibold",children:[r.entropyBalance.toFixed(3)," kJ/K"]}),e.jsx("p",{className:"text-[11px] text-amber-200/70",children:"Net balance over the loop"})]})]})]})]}),e.jsx("div",{className:"relative flex-1 px-4 py-4",children:e.jsxs("div",{className:"flex h-full flex-col gap-4",children:[e.jsx("div",{className:"flex-1 min-h-[360px]",children:e.jsx(ce,{hotTemp:r.hot,coldTemp:r.cold,volume:r.volume,moles:r.moles,irreversibility:r.irreversibility,heatAdded:r.heatAdded,workOut:r.workOut,efficiency:r.efficiency,entropyBalance:r.entropyBalance,pressureHot:r.pressureHot,pressureCold:r.pressureCold})}),e.jsxs("div",{className:"rounded-2xl border border-amber-900/80 bg-[#1a110c]/70 px-4 py-4 shadow-inner shadow-amber-900/20",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-amber-50",children:[e.jsx(X,{className:"text-amber-300"}),"Reservoir controls"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.25em] text-amber-300/80",children:[e.jsx(ie,{className:"text-amber-200"}),"Heat engine"]})]}),e.jsxs("div",{className:"mt-3 grid gap-3 md:grid-cols-2 xl:grid-cols-3",children:[e.jsx(w,{label:"Hot reservoir",value:t.hotTemp,min:520,max:1200,step:10,unit:"K",accent:"#f59e0b",description:"Raise the hot bath temperature; Carnot tops out at Th-Tc.",formatValue:s=>Math.round(s),onChange:c("hotTemp")}),e.jsx(w,{label:"Cold sink",value:t.coldTemp,min:250,max:520,step:10,unit:"K",accent:"#22d3ee",description:"Lower the cold bath to open the window for useful work.",formatValue:s=>Math.round(s),onChange:c("coldTemp")}),e.jsx(w,{label:"Moles of working fluid",value:t.moles,min:.4,max:2.5,step:.05,unit:"mol",accent:"#fbbf24",description:"More gas lifts both pressure and capacity for work.",formatValue:s=>s.toFixed(2),onChange:c("moles")}),e.jsx(w,{label:"Volume at start",value:t.volume,min:.6,max:2.4,step:.05,unit:"L",accent:"#34d399",description:"Sets the left edge of the p-v loop; expansion scales from here.",formatValue:s=>s.toFixed(2),onChange:c("volume")}),e.jsx(w,{label:"Irreversibility",value:t.irreversibility,min:0,max:.35,step:.01,unit:"loss",accent:"#fb923c",description:"Captures friction, leaks, and finite gradients; trims ideal eta.",formatValue:s=>s.toFixed(2),onChange:c("irreversibility")})]})]})]})})]})};export{be as default};
