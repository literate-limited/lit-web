import{b as S,u as b,r as i,j as t}from"./index-D0UK4MyN.js";import{s as o}from"./api-Ch0e_-9b.js";function C(){const{id:r}=S(),d=b(),[a,j]=i.useState(null),[g,p]=i.useState(!0),[v,n]=i.useState(!1),[s,l]=i.useState({title:"",scriptType:"",rawScript:"",status:""}),[u,h]=i.useState(!1),[m,c]=i.useState(null);i.useEffect(()=>{r&&x()},[r]);const x=async()=>{try{p(!0);const e=await o.get(r);j(e.script),l({title:e.script.title,scriptType:e.script.script_type,rawScript:e.script.raw_script||"",status:e.script.status})}catch(e){console.error("Failed to load script:",e),c("Failed to load script")}finally{p(!1)}},N=async()=>{try{h(!0),c(null),await o.update(r,{title:s.title,scriptType:s.scriptType,rawScript:s.rawScript,status:s.status}),await x(),n(!1)}catch(e){console.error("Failed to save script:",e),c("Failed to save script")}finally{h(!1)}},y=async()=>{if(confirm("Are you sure you want to delete this script?"))try{await o.delete(r),d("/ttv/scripts")}catch(e){console.error("Failed to delete script:",e),c("Failed to delete script")}};return g?t.jsx("div",{className:"ttv-page",children:t.jsx("div",{className:"ttv-loading",children:t.jsx("div",{className:"ttv-spinner"})})}):a?t.jsxs("div",{className:"ttv-page",children:[t.jsxs("div",{className:"ttv-page-header",children:[t.jsx("h1",{className:"ttv-page-title",children:a.title}),t.jsxs("p",{className:"ttv-page-subtitle",children:[a.script_type," â€¢ ",a.status," â€¢"," ","Created ",new Date(a.created_at).toLocaleDateString()]})]}),m&&t.jsx("div",{className:"ttv-alert ttv-alert-error",children:m}),t.jsx("div",{style:{marginBottom:"24px",display:"flex",gap:"12px"},children:v?t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"ttv-button",onClick:N,disabled:u,children:u?"Saving...":"Save Changes"}),t.jsx("button",{className:"ttv-button ttv-button-secondary",onClick:()=>n(!1),children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"ttv-button",onClick:()=>n(!0),children:"Edit Script"}),t.jsx("button",{className:"ttv-button ttv-button-secondary",onClick:()=>d("/ttv/film?script="+r),children:"ðŸŽ¥ Film with Teleprompter"}),t.jsx("button",{className:"ttv-button ttv-button-danger",onClick:y,children:"Delete"})]})}),t.jsx("div",{className:"ttv-card",children:v?t.jsxs("div",{children:[t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Title"}),t.jsx("input",{type:"text",className:"ttv-input",value:s.title,onChange:e=>l({...s,title:e.target.value})})]}),t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Type"}),t.jsxs("select",{className:"ttv-select",value:s.scriptType,onChange:e=>l({...s,scriptType:e.target.value}),children:[t.jsx("option",{value:"other",children:"Other"}),t.jsx("option",{value:"voiceover",children:"Voiceover"}),t.jsx("option",{value:"sync",children:"Sync"})]})]}),t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Status"}),t.jsxs("select",{className:"ttv-select",value:s.status,onChange:e=>l({...s,status:e.target.value}),children:[t.jsx("option",{value:"draft",children:"Draft"}),t.jsx("option",{value:"published",children:"Published"}),t.jsx("option",{value:"archived",children:"Archived"})]})]}),t.jsxs("div",{className:"ttv-form-group",children:[t.jsx("label",{className:"ttv-label",children:"Script Text"}),t.jsx("textarea",{className:"ttv-textarea",value:s.rawScript,onChange:e=>l({...s,rawScript:e.target.value}),style:{minHeight:"400px",fontFamily:"monospace",fontSize:"16px",lineHeight:"1.8"}})]})]}):t.jsxs("div",{children:[t.jsx("h2",{className:"ttv-card-title",children:"Script"}),a.raw_script?t.jsx("div",{style:{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"16px",lineHeight:"1.8",color:"#F1F5F9"},children:a.raw_script}):t.jsxs("div",{className:"ttv-empty-state",children:[t.jsx("p",{className:"ttv-empty-title",children:"No script text"}),t.jsx("p",{className:"ttv-empty-description",children:'Click "Edit Script" to add text'})]})]})}),a.cuts&&a.cuts.length>0&&t.jsxs("div",{className:"ttv-card",children:[t.jsxs("h2",{className:"ttv-card-title",children:["Cuts (",a.cuts.length,")"]}),t.jsx("ul",{className:"ttv-list",children:a.cuts.map((e,f)=>t.jsxs("li",{className:"ttv-list-item",children:[t.jsxs("div",{children:[t.jsxs("strong",{children:["Cut ",f+1]}),e.start_time!==null&&t.jsxs("span",{style:{marginLeft:"12px",color:"#94A3B8"},children:[e.start_time,"s - ",e.end_time,"s"]})]}),t.jsx("div",{style:{marginTop:"8px",color:"#94A3B8",fontSize:"14px"},children:e.cut_text})]},e.id))})]})]}):t.jsx("div",{className:"ttv-page",children:t.jsx("div",{className:"ttv-alert ttv-alert-error",children:"Script not found"})})}export{C as default};
